<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="网络, 巨瑞康的个人博客">
    <meta name="description" content="">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>网络 | 巨瑞康的个人博客</title>
    <link rel="icon" type="image/png" href="/JRK.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="巨瑞康的个人博客" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">巨瑞康的个人博客</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>留言板</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">巨瑞康的个人博客</div>
        <div class="logo-desc">
            
            Never really desperate, only the lost of the soul.
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			留言板
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/blinkfox/hexo-theme-matery" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/blinkfox/hexo-theme-matery" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/11.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">网络</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        margin: 35px 0 15px 0;
        padding-left: 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        height: calc(100vh - 250px);
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/Java/">
                                <span class="chip bg-color">Java</span>
                            </a>
                        
                            <a href="/tags/%E9%9D%A2%E8%AF%95/">
                                <span class="chip bg-color">面试</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/Java%E5%AD%A6%E4%B9%A0/" class="post-category">
                                Java学习
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2020-08-25
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>更新日期:&nbsp;&nbsp;
                    2020-10-12
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    10.4k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp;
                    37 分
                </div>
                

                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">
        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1 id="网络"><a href="#网络" class="headerlink" title="网络"></a>网络</h1><h2 id="1-OSI-和-TCP-IP-的分层结构"><a href="#1-OSI-和-TCP-IP-的分层结构" class="headerlink" title="1. OSI 和 TCP/IP 的分层结构"></a>1. OSI 和 TCP/IP 的分层结构</h2><h3 id="1-分层介绍"><a href="#1-分层介绍" class="headerlink" title="1. 分层介绍"></a>1. 分层介绍</h3><ul>
<li>OSI的体系结构分为七层，TCP/IP 的体系结构分为四层；</li>
<li>学习计算机网络使用的是一种折中的办法，分为五层的体系结构，<strong>从下到上分别为：物理层、数据链路层、网络层、运输层和应用层</strong>。</li>
</ul>
<hr>
<h3 id="2-应用层"><a href="#2-应用层" class="headerlink" title="2. 应用层"></a>2. 应用层</h3><p><strong>应用层（application layer）</strong>的任务是<strong>通过应用进程间的交互</strong>来完成特定的网络应用。应用层协议定义的是<strong>应用进程间通信和交互的规则</strong>。</p>
<ul>
<li>对于不同的网络应用需要不同的应用层协议，如<strong>域名系统 DNS</strong>，支持万维网应用的 <strong>HTTP 协议</strong>，支持电子邮件的 <strong>SMTP 协议</strong>等。我们把<strong>应用层交互的数据单元称为报文</strong>。<ul>
<li><strong>域名系统（DNS，Domain Name System）</strong>是因特网的一项核心服务，它作为可以将<strong>域名和 IP 地址相互映射</strong>的分布式数据库，能够使人们方便的访问互联网，而不用记住 IP 数串。如 <a href="http://www.baidu.com等。" target="_blank" rel="noopener">www.baidu.com等。</a></li>
<li><strong>超文本传输协议（HTTP，HyperText Transfer Protocol）</strong>是互联网上最为广泛应用的网络协议之一，所有的 WWW 文件都必须遵守这个协议。设计 HTTP 最初的目的是为了提供一种发布和接收 HTML 页面的方法。</li>
<li><strong>文件传输协议（FTP，File Transfer Protocol）</strong>：用于 Internet 上的控制文件的<strong>双向传输</strong>。在 FTP 的使用当中，用户经常遇到两个概念：<strong>下载（Download） 和上传（Upload）</strong>。在进进行文件传输时，FTP 的客户和服务器之间要先建立<strong>两个并行的 TCP 连接：控制连接和数据连接</strong>。实际用于传输文件的是数据连接。 </li>
<li><strong>简单文件传输协议（TFTP，Trivial File Transfer Protocol）</strong>：是 <strong>TCP/IP 协议族</strong>中的一个用来在客户机与服务器之间进行简单文件传输的协议，提供不复杂、开销不大的文件传输服务。端口号为69。</li>
<li><strong>简单邮件传输协议（SMTP，Simple Mail Transfer Protocol）</strong>：它是一组用于<strong>将邮件由源地址传送到目的地址</strong>的规则，由它来控制信件的中转方式。SMTP 协议属于 <strong>TCP/IP 协议族</strong>，它帮助每台计算机在发送或中转信件时找到下一个目的地。</li>
<li><strong>邮局协议 3（Post Office Protocol 3）</strong>：是 <strong>TCP/IP 协议族</strong>中的一员，协议主要用于支持使用客户端远程管理在服务器上的电子邮件。</li>
<li><strong>网络邮件访问协议（Internet Mail Access Protocol）</strong>：主要作用是邮件客户端从服务端获取邮件信息，下载邮件等。对于阅读、标记、移动和删除等操作，<strong>IMAP 协议使客户端与邮箱更新同步，POP3 协议仅在客户端内</strong>。</li>
<li><strong>电子邮件系统</strong>：一个电子邮件系统有三个重要组成构件：用户代理、邮件服务器、邮件协议（包括邮件发送协议，如 SMTP，和邮件读取协议，如 POP3 和 IMAP）。用户代理和邮件服务器都要运行这些协议。</li>
</ul>
</li>
</ul>
<hr>
<h3 id="3-运输层"><a href="#3-运输层" class="headerlink" title="3. 运输层"></a>3. 运输层</h3><p><strong>运输层（transport layer）</strong>的任务是向<strong>两台主机进程之间的通信</strong>提供通用的数据传输服务。应用进程利用该服务传送应用层报文。</p>
<p><strong>运输层主要使用两种协议</strong>：</p>
<ul>
<li><strong>传输控制协议 TCP</strong>：提供<strong>面向连接</strong>的，<strong>可靠的</strong>数据传输服务。</li>
<li><strong>用户数据协议 UDP</strong>：提供<strong>无连接</strong>的，<strong>不保证可靠</strong>的数据传输服务。</li>
</ul>
<hr>
<h3 id="4-网络层"><a href="#4-网络层" class="headerlink" title="4. 网络层"></a>4. 网络层</h3><p>计算机网络中进行通信的两个计算机之间可能会经过很多个<strong>数据链路</strong>，也可能还要经过很多<strong>通信子网</strong>。<strong>网络层</strong>的任务是，当<strong>两个计算机间进行通信</strong>时，<strong>选择合适的网间路由和交换结点</strong>，确保数据及时传送。</p>
<ul>
<li>在发送数据时，网络层把运输层产生的报文段或用户数据报封装成分组和包进行传送。在 TCP/IP 体系结构中，由于网络层使用 <strong>IP 协议</strong>，因此分组也叫 <strong>IP 数据报</strong> ，简称 <strong>数据报</strong>。</li>
<li>互联网是由大量的异构（heterogeneous）网络通过路由器（router）相互连接起来的。互联网使用的网络层协议是无连接的网际协议（Intert Protocol）和许多路由选择协议，因此互联网的网络层也叫做<strong>网际层</strong>或<strong>IP层</strong>。 </li>
<li><strong>子网掩码</strong>：它是一种用来指明一个 IP 地址的哪些位标识的是主机所在的子网，以及哪些位标识的是主机的位掩码。子网掩码不能单独存在，它必须结合IP地址一起使用。</li>
<li><strong>设备：路由器</strong>。</li>
<li><strong>协议：IP、ARP、RARP 和 ICMP 等</strong>。</li>
</ul>
<hr>
<h3 id="5-数据链路层"><a href="#5-数据链路层" class="headerlink" title="5. 数据链路层"></a>5. 数据链路层</h3><p><strong>数据链路层（data link layer）通常简称为链路层。两台主机之间的数据传输，总是在一段一段的链路上传送的，这就需要使用专门的链路层的协议。</strong></p>
<ul>
<li>在两个相邻节点之间传送数据时，<strong>数据链路层将网络层交下来的 IP 数据报组装成帧</strong>，在两个相邻节点间的链路上传送帧。每一帧包括数据和必要的控制信息（如同步信息，地址信息，差错控制等）。</li>
<li>链路是从一个结点到相邻节点的一段物理链路，数据链路则在链路的基础上增加了一些必要的硬件（如网络适配器）和软件（如协议的实现）。</li>
<li>数据链路层传输协议的数据单元是帧。数据链路层的三个基本问题是：<strong>封装成帧</strong>，<strong>透明传输</strong>和<strong>差错检测</strong>。</li>
<li><strong>MAC 地址</strong>：意译为媒体访问控制，或称为<strong>物理地址、硬件地址，用来定义网络设备的位置</strong>。在 OSI 模型中，第三层网络层负责 IP 地址，第二层数据链路层则负责 MAC 地址。因此<strong>一个主机会有一个 MAC 地址，而每个网络位置会有一个专属于它的 IP 地址</strong>。</li>
<li><strong>设备：网桥、交换机等</strong>。</li>
<li><strong>协议：PPP（点对点协议）、ARQ（自动重传）等</strong>。</li>
</ul>
<hr>
<h3 id="6-物理层"><a href="#6-物理层" class="headerlink" title="6. 物理层"></a>6. 物理层</h3><ul>
<li><strong>在物理层上所传送的数据单位是比特</strong>。</li>
<li><strong>物理层（physical layer）</strong>的作用是实现<strong>相邻计算机节点之间比特流的透明传送</strong>，尽可能屏蔽掉具体传输介质和物理设备的差异。</li>
<li>“透明传送比特流” 表示<strong>经实际电路传送后的比特流没有发生变化</strong>，对传送的比特流来说，这个电路好像是看不见的。</li>
<li><strong>设备：中继器，集线器等</strong>。</li>
</ul>
<hr>
<h3 id="7-子网，子网掩码，子网地址，广播地址"><a href="#7-子网，子网掩码，子网地址，广播地址" class="headerlink" title="7. 子网，子网掩码，子网地址，广播地址"></a>7. 子网，子网掩码，子网地址，广播地址</h3><p><img src="%E7%BD%91%E7%BB%9C.assets/20160712182446560" alt=""></p>
<h2 id="2-TCP-和-UDP"><a href="#2-TCP-和-UDP" class="headerlink" title="2. TCP 和 UDP"></a>2. TCP 和 UDP</h2><h3 id="1-TCP-三次握手"><a href="#1-TCP-三次握手" class="headerlink" title="1. TCP 三次握手"></a>1. TCP 三次握手</h3><p><img src="%E7%BD%91%E7%BB%9C.assets/640.png" alt=""></p>
<ol>
<li><strong>客户端</strong>发送带有 <strong>SYN 标志</strong>的数据包给服务端——一次握手；</li>
<li><strong>服务端</strong>发送带有 <strong>SYN/ACK 标志</strong>的数据包给客户端——二次握手；</li>
<li><strong>客户端</strong>发送带有 <strong>ACK 标志</strong>的数据包给服务端——三次握手；</li>
</ol>
<ul>
<li><strong>客户端先发送</strong>。</li>
</ul>
<hr>
<h3 id="2-为什么要三次握手"><a href="#2-为什么要三次握手" class="headerlink" title="2. 为什么要三次握手"></a>2. 为什么要三次握手</h3><blockquote>
<p><strong>三次握手的目的是建立可靠的通信信道</strong>。</p>
</blockquote>
<p>说到通讯，简单来说就是数据的发送与接收，而三次握手最主要的目的就是<strong>双方确认自己与对方的发送与接收是正常的。</strong> </p>
<ol>
<li>第一次握手：服务端确认<strong>客户端发送正常，自己接收正常</strong>；</li>
<li>第二次握手：<strong>客户端</strong>确认<strong>自己发送、接收正常，服务端发送、接收正常</strong>（客户端确认完成）；</li>
<li>第三次握手：<strong>服务端</strong>确认<strong>自己发送、接收正常，客户端发送、接收正常</strong>（服务端确认完成）。</li>
</ol>
<ul>
<li>因此三次握手就能使双方确认，自己和对方都收发正常。</li>
</ul>
<blockquote>
<p>是确认双方的<strong>初始序列号</strong>。</p>
</blockquote>
<p>序列号是保证 TCP 可靠的基础。</p>
<ul>
<li>建立连接时，序列号生成器会生成初始序列号，是一个和时钟相关的 32 位数据。</li>
<li>如果客户端请求迟迟收不到服务器端回应，会再次发送请求，这两次请求的序列号也是不同的。</li>
<li>因此如果只有两次握手，客户端不给服务器端发送确认，那么服务器端会开启两份资源，造成资源的浪费。而如果客户端给服务器端发送确认，则服务器端可以知道是哪个请求建立了连接，那么多余的资源可以释放。</li>
</ul>
<p>如果初始序列号从 0 开始写死，而发送过程中客户端宕机，此时已经发送了 10 个包，重新连接后序列号又从 0 开始，而服务器端的 ACK 是第 20 个包的，就会出现问题。</p>
<hr>
<h3 id="4-四次挥手"><a href="#4-四次挥手" class="headerlink" title="4. 四次挥手"></a>4. 四次挥手</h3><ol>
<li><strong>客户端</strong>发送一个带有 <strong>FIN 标志</strong>的报文给服务端，进入 WAIT-1 状态，表示释放连接——一次挥手；</li>
<li><strong>服务端</strong>发送一个带有 <strong>ACK 标志</strong>的报文给客户端，表示确认收到，进入 CLOSE_WAIT 状态；客户端收到确认报文，进入 WAIT-2 状态——二次挥手；</li>
<li><strong>服务端</strong>发送完所有数据后，发送一个带有 <strong>FIN 标志</strong>的报文给客户端，进入 LAST-ACK 状态，表示释放连接——三次挥手；</li>
<li><strong>客户端</strong>发送一个带有 <strong>ACK 标志</strong>的报文给服务端，表示确认，进入 TIME_WAIT 状态——四次挥手。</li>
</ol>
<ul>
<li>注意：<strong>当客户端发送最后的确认后，并不会立刻释放连接，必须经过 2*MSL（最长报文段寿命）的时间后，客户端才会关闭 TCB（传输控制块）。而服务端接收到确认后，立即进入 CLOSED 状态。因此，服务端结束的时间要比客户端早一些</strong>。</li>
</ul>
<hr>
<h3 id="5-为什么客户端断开前需要等待-2MSL"><a href="#5-为什么客户端断开前需要等待-2MSL" class="headerlink" title="5. 为什么客户端断开前需要等待 2MSL"></a>5. 为什么客户端断开前需要等待 2MSL</h3><ol>
<li>客户端发送最后的确认报文后，这个报文可能丢失；</li>
<li>服务端迟迟接收不到确认报文，会重新发送请求断开连接 FIN 报文；</li>
<li>客户端在这 2MSL 时间内就会收到新的报文，再次发送确认报文，并重启 2MSL 计时器。</li>
</ol>
<hr>
<h3 id="6-为什么挥手比握手多了一次"><a href="#6-为什么挥手比握手多了一次" class="headerlink" title="6. 为什么挥手比握手多了一次"></a>6. 为什么挥手比握手多了一次</h3><ol>
<li>建立连接时，服务器接收到 SYN 报文后，<strong>将 SYN 和 ACK 放在一个报文中</strong>发送给客户端。</li>
<li>关闭连接时，服务器接收到 FIN 报文后，<strong>可能还有未发送完的数据，于是先发送 ACK 表示确认，待数据都发送完后，再发送 FIN 报文请求关闭连接</strong>。由于 <strong>ACK 和 FIN 报文分开发送</strong>，从而导致挥手比握手多了一次。</li>
</ol>
<hr>
<h3 id="7-TCP-和-UDP-的区别"><a href="#7-TCP-和-UDP-的区别" class="headerlink" title="7. TCP 和 UDP 的区别"></a>7. TCP 和 UDP 的区别</h3><ul>
<li><strong>UDP 在传输数据前不需要先建立连接</strong>，接收端主机收到 UDP 报文后，<strong>不需要给出任何确认</strong>。一般用于语音、视频和直播等即时通信。</li>
<li><strong>TCP 是面向连接的服务</strong>。TCP 在传输数据前必须先有<strong>三次握手</strong>建立连接，数据传送后要有<strong>四次挥手</strong>关闭连接，并且在数据传递时，有确认、窗口。重传和拥塞控制机制。也由于这些保证， TCP 的开销比 UDP 大，一般用于文件传输、发送和接收邮件、远程登录等场景。</li>
<li>TCP 是字节流传输的，UDP 是报文传输。</li>
<li>TCP 保证顺序，UDP 不保证。</li>
</ul>
<hr>
<h3 id="8-TCP-如何保证可靠传输"><a href="#8-TCP-如何保证可靠传输" class="headerlink" title="8. TCP 如何保证可靠传输"></a>8. TCP 如何保证可靠传输</h3><ol>
<li>应用数据被分割成 TCP 认为合适的<strong>数据块（分组）进行发送</strong>；</li>
<li>TCP 给发送的<strong>每一个包编号</strong>，接收方对数据包进行排序，把有序数据传到应用层；</li>
<li><strong>校验和</strong>：TCP 保持它首部和数据的检验和。这是一个端到端的检验和，目的是<strong>检测数据在传输过程中的任何变化</strong>。如果收到段的检验和有差错，TCP 将丢弃这个报文段和不确认收到此报文段；</li>
<li>TCP 的接收端会<strong>丢弃重复的数据</strong>；</li>
<li><strong>流量控制（滑动窗口）</strong>：TCP 连接的每一方都有固定大小的缓冲空间，TCP 的<strong>接收端只允许发送端发送接收端缓冲区能接纳的数据</strong>。当接收方来不及处理发送方的数据时，能提示发送方降低发送的速率，防止包丢失。TCP 使用的流量控制协议是可变大小的滑动窗口协议，<strong>接收方发送的确认报文中的窗口字段可以用来控制发送方窗口大小</strong>，从而影响发送方的发送速率。将窗口字段设置为 0，则发送方不能发送数据；</li>
<li><strong>拥塞控制</strong>：当网络拥塞时，减少数据的发送；</li>
<li><strong>ARQ 协议（确认收到）</strong>：每发完一个分组就<strong>停止发送</strong>，等待对方确认，收到确认后再发送下一个分组。也有<strong>连续 ARQ 协议，特点是 Go-Back-N</strong>。<ol>
<li>如发送了 1 2 3 4 5 个包，发送方会等待确认，如果接收方的确认是 ACK 6，说明 5 个包都收到了，接下来从第 6 个包开始发。</li>
<li>但如果过程中只有 4 包没有收到，那么接收方的确认是 ACK 4，说明 4 没有收到。这时发送方会从 4 开始从新发送，也就是说 5 包也会被重新发送。</li>
<li>在这个过程中发送方有个<strong>超时重传机制</strong>。这里可能是 4 包丢了，也可能是速度慢还没有到，如果接到 ACK 确认就重传，可能这时 4 包已经到了，服务器端新的 ACK 也在路上了，这就会造成资源的浪费。</li>
</ol>
</li>
<li><strong>超时重传</strong>：当 TCP 发出一个分组后，它启动一个定时器，等待接收端确认收到。<strong>如果不能及时收到一个确认，将重发这个分组</strong>。</li>
<li><strong>SACK 重传</strong>：为了解决重传哪些数据的问题。上述描述中，Go-Back-N 机制可能会导致发送的重复，这是一种资源的浪费。SACK 就是接受端回传已经接受到数据，如上一条 ACK 5001，说明接受从 5001 开始的数据。接收时一直更新 SACK，如 5501-6000，6001-6500，发送方就可以明确知道是 5001-5500 这一段丢了，于是重传这一段的数据即可。</li>
</ol>
<hr>
<h3 id="9-拥塞控制"><a href="#9-拥塞控制" class="headerlink" title="9. 拥塞控制"></a>9. 拥塞控制</h3><p>拥塞控制中的算法 Reno 十分著名，以此作为说明对象。</p>
<p>拥塞控制中用到了一个拥塞窗口，这和滑动窗口是有区别的。<strong>滑动窗口是接收端确定的</strong>，可以接收的数据数量。<strong>拥塞窗口是发送端维护的</strong>，根据网络的拥塞程度动态调节。</p>
<p>发送方控制拥塞窗口的原则是：只要网络没有出现拥塞，拥塞窗口就再增大一些，以便把更多的分组发送出去。但只要网络出现拥塞，拥塞窗口就减小一些，以减少注入到网络中的分组数。 </p>
<ol>
<li><strong>慢启动</strong>：刚开始发送时不发送大量的数据，先探测一下网络的拥塞程度，由小到大扩大拥塞窗口。如果没有出现丢包，每收到一个 ACK 窗口大小加一，整个轮次下来，窗口会扩大一倍，这时窗口大小是呈指数增长的。</li>
<li><strong>拥塞避免</strong>：如果发生丢包，则进入拥塞避免阶段，窗口每轮次加一，呈线性增长。</li>
<li><strong>快重传</strong>：如果发送端连续收到三个重复的 ACK，认为产生丢失，并且此时网络通畅，不会进行超时重传，而是立刻重传，这样可以提高效率。</li>
<li><strong>快恢复</strong>：快重传完成后进入快恢复阶段，将慢启动阈值修改为当前拥塞窗口的一半，同时拥塞窗口值等于阈值，进入拥塞避免阶段。</li>
</ol>
<p><img src="https://pic1.zhimg.com/80/v2-86c12ed3ddb2391c057f7d3598372880_720w.jpg" alt=""></p>
<hr>
<h3 id="10-TCP-粘包拆包"><a href="#10-TCP-粘包拆包" class="headerlink" title="10. TCP 粘包拆包"></a>10. TCP 粘包拆包</h3><blockquote>
<p><strong>粘包</strong></p>
</blockquote>
<p>粘包是指连续的包粘在一起，看起来像是一个包的情况。产生这种情况的原因有多种：</p>
<ol>
<li><strong>要发送的数据大于TCP发送缓冲区剩余空间大小，将会发生拆包</strong>。 </li>
<li>待发送数据大于MSS（最大报文长度），TCP在传输前将进行拆包。 </li>
<li>要发送的数据小于TCP发送缓冲区的大小，TCP将多次写入缓冲区的数据一次发送出去，将会发生粘包。 </li>
<li><strong>接收数据端的应用层没有及时读取接收缓冲区中的数据，将发生粘包</strong>。</li>
</ol>
<blockquote>
<p><strong>解决方法</strong></p>
</blockquote>
<ol>
<li>发送端给每个数据包添加包首部，<strong>首部中应该至少包含数据包的长度</strong>，这样接收端在接收到数据后，通过读取包首部的长度字段，便知道每一个数据包的实际长度了。</li>
<li>发送端<strong>将每个数据包封装为固定长度</strong>（不够的可以通过补0填充），这样接收端每次从接收缓冲区中读取固定长度的数据就自然而然的把每个数据包拆分开来。 </li>
<li>可以<strong>在数据包之间设置边界，如添加特殊符号</strong>，这样，接收端通过这个边界就可以将不同的数据包拆分开。</li>
</ol>
<hr>
<h2 id="3-HTTP-协议"><a href="#3-HTTP-协议" class="headerlink" title="3. HTTP 协议"></a>3. HTTP 协议</h2><h3 id="1-HTTP-简介"><a href="#1-HTTP-简介" class="headerlink" title="1. HTTP 简介"></a>1. HTTP 简介</h3><ul>
<li>工作原理：HTTP 协议工作在客户端 / 服务器架构上（C / S）。<strong>浏览器作为 HTTP 客户端通过 URL 向 HTTP 服务端即WEB服务器发送所有请求</strong>。</li>
<li><strong>HTTP 默认端口号为 80</strong>，可以修改。</li>
<li><strong>注意事项</strong>：<ol>
<li>HTTP 是<strong>无连接</strong>的（短连接）：<strong>每次连接只处理一个请求</strong>。当客户端浏览器访问的某个HTML或其他类型的Web页中包含有其他的Web资源（如JavaScript文件、图像文件、CSS文件等），每遇到这样一个Web资源，浏览器就会重新建立一个HTTP会话。服务器处理完客户的请求，并收到客户的应答后，即断开连接。采用这种方式可以节省传输时间。 </li>
<li>HTTP 是<strong>无状态</strong>的：无状态指协议<strong>对事物处理没有记忆能力</strong>。缺少状态意味着如果后续处理需要前面的信息，则它必须重传，这样可能导致每次连接传送的数据量增大。另一方面，在服务器不需要先前信息时它的应答就较快。这个可以引出 cookie。</li>
<li>HTTP 是媒体独立的：只要客户端和服务器知道如何处理的数据内容，任何类型的数据都可以通过HTTP发送。 </li>
</ol>
</li>
</ul>
<hr>
<h3 id="2-HTTP-消息结构"><a href="#2-HTTP-消息结构" class="headerlink" title="2. HTTP 消息结构"></a>2. HTTP 消息结构</h3><ul>
<li>客户端：客户端发送一个 HTTP 请求到服务器，请求消息包括以下格式：<strong>请求行（request line）、请求头部（header）</strong>、空行和请求数据。<ul>
<li><strong>请求行</strong>中包括：<strong>请求方法</strong>（最常用的方法为 GET 和 POST）、<strong>URL</strong> 和<strong>协议版本</strong>，用空格隔开。</li>
<li><strong>请求头部</strong>内格式为：<strong>头部字段名 ：值</strong>（可以有多个）。<ul>
<li>Accept：客户端想要接收的数据类型。</li>
<li>Accept-CharSet：客户端可接收的字符集。</li>
<li>Accept-Language：浏览器所希望的语言种类，当服务器能够提供一种以上的语言版本时要用到。</li>
<li><strong>Host</strong>：客户机通过这个头告诉服务器，想访问的主机名。</li>
<li>User-Agent：User-Agent 头域的内容包含发出请求的用户信息、浏览器类型，如果 Servlet 返回的内容与浏览器类型有关则该值非常有用。 </li>
<li><strong>Cookie</strong>：客户机通过这个头可以向服务器带数据，这是最重要的请求头信息之一。</li>
<li><strong>Connection</strong>：处理完这次请求后是否断开连接还是继续保持连接。</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img src="%E7%BD%91%E7%BB%9C.assets/640.webp" alt=""></p>
<p><img src="%E7%BD%91%E7%BB%9C.assets/20160921092902556.jpg" alt=""></p>
<ul>
<li>服务器端：服务器端响应消息包括以下格式：<strong>状态行</strong>、响应报头、空行和响应正文。<ul>
<li><strong>状态行</strong>中包括：协议版本和<strong>状态码</strong>。常用状态码有：<strong>200（OK）</strong>、301（资源被永久转移到其他 URL）、<strong>404（请求的资源不存在）</strong>和 500（内部服务器错误）等。</li>
<li><strong>响应报头</strong>：<ul>
<li>Allow：服务器支持哪些请求方法(如GET、POST等)。</li>
<li>Content-Encoding：文档的编码(Encode)方法。 </li>
<li>Content- Type：表示后面的文档属于什么数据类型。 </li>
<li>Date：当前的 GMT 时间。</li>
<li>Expires：告诉浏览器把回送的资源缓存多长时间，-1或0则是不缓存。</li>
<li>Location：这个头配合302状态码使用，用于重定向接收者到一个新URI地址。</li>
<li>Server：服务器通过这个头告诉浏览器服务器的类型。 </li>
<li>Set-Cookie：设置和页面关联的Cookie。 </li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img src="%E7%BD%91%E7%BB%9C.assets/640-1601175112868.webp" alt=""></p>
<p><img src="%E7%BD%91%E7%BB%9C.assets/20160921092902557.jpg" alt=""></p>
<ul>
<li><strong>200：请求被正常处理</strong></li>
<li><strong>204：请求被受理但没有资源可以返回</strong></li>
<li>206：客户端只是请求资源的一部分，服务器只对请求的部分资源执行GET方法，相应报文中通过Content-Range指定范围的资源。</li>
<li><strong>301：永久性重定向</strong></li>
<li><strong>302：临时重定向</strong></li>
<li>303：与302状态码有相似功能，只是它希望客户端在请求一个URI的时候，能通过GET方法重定向到另一个URI上</li>
<li><strong>304：发送附带条件的请求时，条件不满足时返回，与重定向无关</strong></li>
<li>307：临时重定向，与302类似，只是强制要求使用POST方法</li>
<li><strong>400：请求报文语法有误，服务器无法识别</strong></li>
<li>401：请求需要认证</li>
<li><strong>403：请求的对应资源禁止被访问</strong></li>
<li><strong>404：服务器无法找到对应资源</strong></li>
<li><strong>500：服务器内部错误</strong></li>
<li><strong>503：服务器正忙</strong></li>
</ul>
<hr>
<h3 id="3-HTTP-方法"><a href="#3-HTTP-方法" class="headerlink" title="3. HTTP 方法"></a>3. HTTP 方法</h3><ol>
<li><strong>GET：请求指定的页面信息，并返回实体主体。</strong>GET 方法的请求参数会拼在 URL 后，容易被窃取，且 URL 的长度有限制。</li>
<li>HEAD：类似于 GET 请求，只不过返回的响应中没有具体的内容，用于获取报头。</li>
<li><strong>POST：向指定资源提交数据进行处理请求（例如提交表单或者上传文件）。数据被包含在请求体中。POST 请求可能会导致新资源的建立和/或已有资源的修改。</strong>POST 请求会把参数和值放在消息体中，对外界不可见，且长度不受限制。</li>
<li><strong>PUT</strong>：从客户端向服务器传送的数据取代指定的文档的内容。</li>
<li><strong>DELETE</strong>：请求服务器删除指定的页面。</li>
<li>CONNECT：HTTP/1.1 协议中预留给能够将连接改为管道方式的代理服务器。</li>
<li>OPTIONS：允许客户端查看服务器的性能。</li>
<li>TRACE：回显服务器收到的请求，主要用于测试或诊断。</li>
<li>PATCH：是对 PUT 方法的补充，用来对已知资源进行局部更新。</li>
</ol>
<ul>
<li><strong>其中最常用的方法为 GET 和 POST。</strong></li>
</ul>
<hr>
<h3 id="4-HTTP-长连接和短连接"><a href="#4-HTTP-长连接和短连接" class="headerlink" title="4. HTTP 长连接和短连接"></a>4. HTTP 长连接和短连接</h3><ul>
<li><strong>HTTP/1.0 中默认使用短连接</strong>。也就是说，客户端和服务器每进行一次 HTTP 操作，就建立一次连接，任务结束就中断连接。 </li>
<li><strong>HTTP/1.1起，默认使用长连接</strong>，用以保持连接特性。在使用长连接的情况下，<strong>当一个网页打开完成后，客户端和服务器之间用于传输 HTTP 数据的 TCP 连接不会关闭，客户端再次访问这个服务器时，会继续使用这一条已经建立的连接</strong>。Keep-Alive不会永久保持连接，它有一个保持时间，可以在不同的服务器软件（如Apache）中设定这个时间。实现长连接需要客户端和服务端都支持长连接。</li>
<li><strong>优缺点</strong>：请求频繁时，长连接省去较多 TCP 建立和关闭连接的操作，减少浪费，节约时间。请求不频繁时，短连接便于管理，不像长连接需要保活等，存在的连接都是有用的连接。</li>
<li><strong>HTTP协议的长连接和短连接，实质上是TCP协议的长连接和短连接</strong>。</li>
</ul>
<hr>
<h3 id="5-URI-和-URL-的区别"><a href="#5-URI-和-URL-的区别" class="headerlink" title="5. URI 和 URL 的区别"></a>5. URI 和 URL 的区别</h3><ul>
<li>URI(Uniform Resource Identifier) 是统一资源标志符，<strong>可以唯一标识一个资源</strong>。</li>
<li>URL(Uniform Resource Location) 是统一资源定位符，<strong>可以提供该资源的路径</strong>。它是一种具体的 URI，即 <strong>URL 可以用来标识一个资源，而且还指明了如何 locate 这个资源</strong>。 </li>
</ul>
<p>URI的作用像身份证号一样，URL的作用更像家庭住址一样。URL是一种具体的URI，它不仅唯一标识资源，而且还提供了定位该资源的信息。</p>
<hr>
<h3 id="6-HTTPS"><a href="#6-HTTPS" class="headerlink" title="6. HTTPS"></a>6. HTTPS</h3><blockquote>
<p><strong>概念解释</strong></p>
</blockquote>
<ul>
<li>密码：密码学中的密码指的是一种<strong>加密/解密的算法</strong>。</li>
<li>密钥（key）：<strong>密钥是一种参数</strong>，是在使用密码算法时输入的参数。<strong>同一个明文在相同密码算法和不同密钥下会生成不同的密文</strong>。</li>
<li>对称密钥：明文在加密和解密过程中使用的密钥是相同的，常见的算法有 AES、DES 等。</li>
<li>非对称密钥：明文在加密和解密过程中使用的密钥是不同的，常见的算法有 <strong>RSA</strong> 等。</li>
<li>数字签名：服务端把报文经过哈希处理生成摘要，再用私钥对摘要进行加密，就生成了数字签名，常见的算法有 MD5 等。</li>
<li>CA（Certificate Authority）：引进的目的是为了保证公钥的真实性。服务端把公钥发送给 CA，CA 会颁发一个数字证书，包含服务端的公钥，并用自己的私钥生成数字签名。之后服务端会将证书发送给客户端，客户端有 CA 的公钥，解签名确认公钥的真实性。</li>
</ul>
<blockquote>
<p><strong>握手流程</strong></p>
</blockquote>
<ul>
<li><strong>加密握手流程在三次握手之后</strong>。</li>
</ul>
<p><img src="%E7%BD%91%E7%BB%9C.assets/640-1601178364186.webp" alt=""></p>
<ol>
<li>用户在浏览器发起HTTPS请求（client hello），默认使用服务端的 443 端口进行连接；</li>
<li>HTTPS需要使用一套 <strong>CA 数字证书</strong>，证书内会附带一个<strong>公钥 Pub</strong>，而与之对应的<strong>私钥 Private</strong> 保留在服务端不公开；</li>
<li>服务端收到请求，返回配置好的包含<strong>公钥 Pub</strong> 的证书给客户端；</li>
<li>客户端收到<strong>证书</strong>，校验合法性，主要包括是否在有效期内、证书的域名与请求的域名是否匹配，上一级证书是否有效（递归判断，直到判断到系统内置或浏览器配置好的根证书），如果不通过，则显示 HTTPS 警告信息，如果通过则继续；</li>
<li>客户端生成一个用于对称加密的<strong>随机 Key</strong>，并用证书内的<strong>公钥 Pub</strong> 进行加密，发送给服务端；</li>
<li>服务端收到<strong>随机 Key</strong> 的密文，使用与<strong>公钥 Pub</strong> 配对的<strong>私钥 Private</strong> 进行解密，得到客户端真正想发送的<strong>随机 Key</strong>；</li>
<li>服务端使用客户端发送过来的<strong>随机 Key</strong> 对要传输的HTTP数据进行对称加密，将密文返回客户端；</li>
<li>客户端使用<strong>随机 Key</strong> 对称解密密文，得到 HTTP 数据明文；</li>
<li>后续HTTPS请求使用之前交换好的<strong>随机Key</strong>进行对称加解密。</li>
</ol>
<hr>
<h3 id="7-HTTP-和-HTTPS-的区别"><a href="#7-HTTP-和-HTTPS-的区别" class="headerlink" title="7. HTTP 和 HTTPS 的区别"></a>7. HTTP 和 HTTPS 的区别</h3><ol>
<li><strong>端口</strong>：HTTP 的 URL 由 “http://” 起始且默认使用端口 80，而 HTTPS 的 URL 由 “https://” 起始且默认使用端口 443。 </li>
<li><strong>安全性和资源消耗：</strong> <strong>HTTP 协议</strong>运行在 TCP 之上，所有传输的内容都是<strong>明文</strong>，客户端和服务器端都无法验证对方的身份。<strong>HTTPS 协议</strong>是运行在 SSL/TLS 之上的 HTTP 协议，SSL/TLS 运行在 TCP之上。所有传输的内容都经过<strong>加密</strong>。所以，<strong>HTTP 安全性没有 HTTPS高，但是 HTTPS 比HTTP耗费更多服务器资源</strong>。</li>
</ol>
<hr>
<h3 id="8-get-和-post-的区别"><a href="#8-get-和-post-的区别" class="headerlink" title="8. get 和 post 的区别"></a>8. get 和 post 的区别</h3><ol>
<li><strong>Get 是用来从服务器上获得数据，而 Post 是用来向服务器上传递数据</strong>。</li>
<li><strong>存储方式</strong>：Get 将表单中数据的按照 variable=value 的形式，<strong>添加到 action 所指向的 URL 后面</strong>，并且两者使用 “?” 连接，而各个变量之间使用 “&amp;” 连接；<strong>Post 是将表单中的数据放在 form 的数据体中</strong>，按照变量和值相对应的方式，传递到 action 所指向 URL。</li>
<li><strong>安全性</strong>：<strong>Get 是不安全的</strong>，因为在传输过程，数据被放在请求的 URL 中，而如今现有的很多服务器、代理服务器或者用户代理都会将请求 URL 记录到日志文件中，然后放在某个地方，这样就可能会有一些隐私的信息被第三方看到。另外，用户也可以在浏览器上直接看到提交的数据，一些系统内部消息将会一同显示在用户面前。<strong>Post 的所有操作对用户来说都是不可见的</strong>。</li>
<li><strong>数据量</strong>：<strong>Get 传输的数据量小</strong>，这主要是因为受 URL 长度限制；<strong>而 Post 可以传输大量的数据</strong>，所以在上传文件只能使用 Post（当然还有一个原因，将在后面的提到）。</li>
<li><strong>字符集</strong>：<strong>Get 限制 Form 表单的数据集的值必须为 ASCII 字符</strong>；而 Post 支持整个 ISO10646 字符集。</li>
<li>Get 是 Form 的默认方法。使用 Post 传输的数据，<strong>可以通过设置编码的方式正确转化中文</strong>；而 Get 传输的数据却没有变化。</li>
<li><strong>缓存</strong>：GET 请求会被浏览器主动 cache，而 POST 不会，除非手动设置。 </li>
</ol>
<hr>
<h3 id="9-从输入-URL-到显示页面的过程"><a href="#9-从输入-URL-到显示页面的过程" class="headerlink" title="9. 从输入 URL 到显示页面的过程"></a>9. 从输入 URL 到显示页面的过程</h3><ol>
<li>DNS解析：通过 URL 找到服务器 IP 地址；</li>
<li>建立 TCP 连接；</li>
<li>发送 HTTP 请求；</li>
<li>服务器处理请求并返回 HTTP 报文；</li>
<li>浏览器解析并渲染页面；</li>
<li>关闭连接。</li>
</ol>
<hr>
<h3 id="10-DNS-解析过程"><a href="#10-DNS-解析过程" class="headerlink" title="10. DNS 解析过程"></a>10. DNS 解析过程</h3><ul>
<li>因特网在命名时采用的是<strong>层次树状结构</strong>的命名方法，任何一个连接在因特网上的主机或路由器，都有一个唯一的层次结构的名字，即域名(domain name)。 如图所示：</li>
</ul>
<p><img src="%E7%BD%91%E7%BB%9C.assets/5679451-6d9d8a9de1453f9a.webp" alt=""></p>
<ol>
<li>在浏览器中输入<a href="http://www.baidu.com域名，首先查找浏览器缓存，但浏览器缓存时间短，且有数量限制。" target="_blank" rel="noopener">www.baidu.com域名，首先查找浏览器缓存，但浏览器缓存时间短，且有数量限制。</a></li>
<li>如果浏览器缓存中没有，则查找操作系统自身的缓存，可以用 ipconfig / displaydns 查看。</li>
<li>如果操作系统缓存没有，则检查<strong>本地的 hosts 文件</strong>是否有这个网址映射关系，如果有，就先调用这个 ip 地址映射，完成域名解析。</li>
<li>如果 hosts 也没有，则会找本地配置的（TCP/IP参数中设置）首选DNS服务器，在此我们叫它<strong>本地DNS服务器</strong>。这个过程是使用 UDP 协议向 DNS 服务器的 53 端口发起请求，<strong>这个请求是一个递归请求</strong>，也就是说本地 DNS 服务器一定会查到 IP 地址并返回。  </li>
<li>此服务器收到查询时，如果要查询的域名，<strong>包含在本地配置区域资源中</strong>，则返回解析记过给客户端，完成域名解析，此解析具有权威性。</li>
<li>如果要查询域名，不由本地DNS服务器区域解析，但<strong>该服务器已缓存</strong>了此网址映射关系，则调用这个IP地址映射，完成域名解析，此解析不具有权威性。</li>
<li>如果本地DNS服务器本地区域文件与缓存解析都失效，则根据本地DNS服务器的设置（是否设置转发器）进行查询，如果未用转发模式，<strong>本地DNS就把请求发至13台根DNS，这个请求是一个递归请求</strong>，根DNS服务器收到请求后会判断这个域名（.com）是谁来授权管理，并会返回一个负责该顶级域名服务器的一个IP。本地DNS服务器收到IP信息后，将会联系负责.com域的这台服务器。这台负责.com域的服务器收到请求后，如果自己无法解析，它就会找一个管理.com域的下一级DNS服务器地址（baidu.com）给本地DNS服务器。当本地DNS服务器收到这个地址后，就会找baidu.com域服务器，重复上面的动作，进行查询，直至找到<a href="http://www.baidu.com主机。" target="_blank" rel="noopener">www.baidu.com主机。</a></li>
</ol>
<blockquote>
<p><strong>递归查询和迭代查询</strong></p>
</blockquote>
<ul>
<li>递归查询是 A 向 B 查询，B 再向 C 查询，最终返回的是 IP 地址。</li>
<li>迭代查询是 A 向 B 查询，B 返回一个地址 C，A 再向 C 查询，依次类推，直到找到 IP 地址。</li>
</ul>
<hr>
<h3 id="11-HTTP-缓存"><a href="#11-HTTP-缓存" class="headerlink" title="11. HTTP 缓存"></a>11. HTTP 缓存</h3><blockquote>
<p>为什么要使用缓存</p>
</blockquote>
<p>客户端每次请求都要提供查找，下载，或者页面的渲染等，如果用户数量大，服务器存在较大压力，并且消耗时间多。</p>
<blockquote>
<p><strong>相关响应头</strong></p>
</blockquote>
<ol>
<li>Cache-Control：<strong>请求/响应头</strong>，控制缓存的最高指令，有以下常用值：<ol>
<li>no-store：所有内容都不缓存。</li>
<li><strong>no-cache</strong>：缓存，但浏览器（客户端）使用缓存前，会判断缓存是否过期，如果过期则不使用。</li>
<li>max-age = x：请求缓存后的 x 秒不再发起请求，比 expires 优先级高。</li>
<li>public：客户端和代理服务器都可以缓存。</li>
<li>private：只有客户端可以缓存。</li>
</ol>
</li>
<li>Expires：<strong>响应头</strong>，代表资源过期时间，由服务器返回提供。</li>
<li>Last-Modified：响应头，资源最近修改时间，由服务器返回。</li>
<li>if-Modified-Since：请求头，资源最近修改时间，由浏览器提供给服务器，和 Last-Modified 是一对，两者会进行对比。</li>
<li>Etag：响应头，资源标识，由服务器返回。</li>
<li>if-None-Match：请求头，资源标识，由浏览器提供给服务器，和 Etag 是一对，两者会进行对比。</li>
</ol>
<blockquote>
<p><strong>缓存机制</strong></p>
</blockquote>
<ol>
<li><strong>Expires</strong>：给资源设置过期时间，在过期时间内不用从服务器获得。<ul>
<li>如果过期了，但资源并没有被修改过，有没有方法避免从服务器获取资源？</li>
</ul>
</li>
<li><strong>Last-Modified 和 if-Modified-Since</strong>：<strong>最近修改时间的对比</strong>，如果资源过期，而两者对的上，则说明资源没有被修改过，返回状态码 304，还是从缓存中获得。如果对不上，返回新的 Expires 和 Last-Modified 和 if-Modified-Since。<ul>
<li>只能精确到秒，如果资源在 1s 内被改变了，浏览器就无法获得最新的资源。</li>
</ul>
</li>
<li><strong>Etag 和 if-None-Match</strong>：<strong>文件内容唯一对比标记</strong>。通过对比这两者是否相等，判断资源是否是最新的。<strong>优先级比 Last-Modified 和 if-Modified-Since 高</strong>。</li>
</ol>
<ul>
<li><strong>重要缺陷</strong>：如果设置永不过期，浏览器无法主动感知服务器内资源的变化。</li>
<li><strong>解决方式</strong>：<strong>给资源加 MD5/hash 标识</strong>，文件如果改动，标识就会变化，请求的就不再是缓存的资源，而是另一个资源了，就必须去服务器取最新的。</li>
</ul>
<hr>
<h2 id="4-Session-和-Cookie"><a href="#4-Session-和-Cookie" class="headerlink" title="4. Session 和 Cookie"></a>4. Session 和 Cookie</h2><h3 id="1-Cookie"><a href="#1-Cookie" class="headerlink" title="1. Cookie"></a>1. Cookie</h3><ul>
<li><p>Cookie 实际是一段文本数据，用于记录用户状态，保存在客户端：</p>
<ul>
<li>客户端请求服务器，如果服务器需要记录该用户的状态，就会使用 response 客户端发送一个 Cookie（相当于身份证号码），客户端会把 Cookie 保存起来；</li>
<li>当客户端再次请求服务器时，会把请求和 Cookie 一同提交给服务器，服务器检查 Cookie 以确认用户状态。服务器还可以根据需要修改 Cookie 的内容。</li>
<li><strong>Cookie 具有不可跨域名性</strong>，即不同网站颁发的 Cookie 不能通用。如当我访问 baidu 的时候，浏览器只会把 baidu 颁发的 Cookie 带过去，而不会带上 google 的 Cookie。但 Cookie 可以通过设置 domain 属性实现跨域名。</li>
</ul>
</li>
<li><p><strong>Cookie 的有效期</strong>：Cookie 的 maxAge 决定 Cookie 的有效期。<strong>maxAge 为正数时</strong>，浏览器会将maxAge为正数的 Cookie 持久化，即<strong>写到对应的 Cookie 文件中</strong>。无论客户关闭了浏览器还是电脑，只要还在 maxAge 秒之前，登录网站时该 Cookie 仍然有效。<strong>maxAge 为负数时</strong>，表示该 Cookie 仅在本浏览器窗口以及本窗口打开的子窗口内有效，关闭窗口后该 Cookie 即失效。这种 Cookie <strong>不会被写入文件中， Cookie 信息保存在浏览器内存中</strong>，因此关闭浏览器该 Cookie 就消失了。<strong>Cookie 默认的 maxAge 值为 –1</strong>，也就是说 Cookie 默认是会话 Cookie。<strong>maxAge 为0时</strong>，表示<strong>删除</strong>该 Cookie。</p>
</li>
<li><p><strong>Cookie 的修改和删除</strong>：response 对象提供的 Cookie 操作方法只有一个添加操作 <code>add(Cookie cookie)</code>。要想修改 Cookie 只能使<strong>用一个同名的 Cookie 来覆盖原来的 Cookie</strong>，达到修改的目的。删除时用一个 maxAge 为 0 的同名 Cookie 覆盖原来的 Cookie。</p>
</li>
<li><p><strong>Cookie 在 Java 中的使用</strong>：Java 中提供了 <strong>Cookie 类</strong>，用于创建一个 Cookie 对象，其中的方法有：</p>
<ul>
<li>构造方法 <code>public Cookie(String name,String value)</code></li>
<li>setValue 与 getValue 方法 </li>
<li>setMaxAge 与 getMaxAge 方法 </li>
<li>getName 方法等</li>
</ul>
<p><strong>response 接口（实现类 HttpServletResponse）</strong>中定义了 addCookie 方法，用于在响应 HTTP 请求时返回 Cookie。</p>
<p><strong>request 接口（实现类 HttpServletRequest）</strong>中定义了 getCookie 方法，用于获取 HTTP 请求中的 Cookie。</p>
</li>
</ul>
<hr>
<h3 id="2-Session"><a href="#2-Session" class="headerlink" title="2. Session"></a>2. Session</h3><ul>
<li>Session 另一种记录客户状态的机制，不同的是Cookie保存在客户端浏览器中，而 <strong>Session 保存在服务器上</strong>。<ul>
<li>客户端浏览器访问服务器的时候，服务器把客户端信息以某种形式记录在服务器上，这就是 Session。</li>
<li>客户端浏览器再次访问时只需要从该 Session 中查找该客户的状态。 </li>
<li><strong>Session 具有不可跨域名性</strong>，即不同网站颁发的 Session 不能通用。</li>
</ul>
</li>
<li>每个来访者对应一个 Session 对象，<strong>所有该客户的状态信息都保存在这个 Session 对象里。Session 对象是在客户端第一次请求服务器的时候自动创建的</strong>。Session 也是一种 key-value 的属性对。</li>
<li><strong>Session 有效期</strong>：Session 保存在服务器端。<strong>为了获得更高的存取速度，服务器一般把 Session 放在内存里</strong>。每个用户都会有一个独立的 Session。<strong>为防止内存溢出，服务器会把长时间内没有活跃的Session从内存删除。这个时间就是 Session 的超时时间</strong>。如果超过了超时时间没访问过服务器，Session就自动失效了。</li>
<li>Session 中提供了很多方法，使用起来比 Cookie 方便。</li>
</ul>
<hr>
<h3 id="3-Session-和-Cookie-的联系"><a href="#3-Session-和-Cookie-的联系" class="headerlink" title="3. Session 和 Cookie 的联系"></a>3. Session 和 Cookie 的联系</h3><ul>
<li><strong>Session需要使用Cookie作为识别标志</strong>：HTTP 协议是无状态的，Session 不能依据 HTTP 连接来判断是否为同一客户，因此服务器向客户端浏览器发送一个<strong>名为 JSESSIONID 的 Cookie，它的值为该 Session 的 id</strong>（也就是 <code>HttpSession.getId()</code> 的返回值）。Session依据该Cookie来识别是否为同一用户。</li>
<li><strong>URL 地址重写</strong>：当某些客户端不支持 Cookie，而想要使用 Session 来记录用户状态时，就需要使用 URL 地址重写。URL 地址重写的原理是，<strong>将该用户 Session 的 id 信息重写到 URL 地址中。服务器能够解析重写后的 URL 获取 Session 的 id</strong>。这样即使客户端不支持 Cookie，也可以使用 Session 来记录用户状态。<strong>Java 中提供 encodeURL 方法</strong>。</li>
</ul>
<hr>
<h3 id="4-Session-和-Cookie-的区别"><a href="#4-Session-和-Cookie-的区别" class="headerlink" title="4. Session 和 Cookie 的区别"></a>4. Session 和 Cookie 的区别</h3><ol>
<li><strong>存储位置</strong>：Cookie 数据保存在客户端（浏览器端），Session 数据保存在服务器端。</li>
<li><strong>安全性</strong>：Cookie 对客户端可见，不是很安全，<strong>考虑到安全性应当使用 Session</strong>。但 Cookie 可以加密，使用时再到服务器端解密。</li>
<li><strong>有效期</strong>：<strong>Cookie 可以设置有效期，保存在硬盘上</strong>，即使浏览器关闭，Cookie 仍然存在。Session 保存在服务器中，可以设置有效期，一般保存在内存中。且 Session 依赖对应的 Cookie，如果 Cookie 失效（maxAge 设置为 -1，并且关闭了浏览器），Session 虽然还在服务器中，但也就失效了。</li>
<li><strong>对服务器负担</strong>：Session 会在一定时间内保存在服务器上，且每个用户都会产生一个 Session。当访问增多时，会比较占用服务器的性能，<strong>考虑到减轻服务器性能方面，应当使用 Cookie</strong>。</li>
<li><strong>存储内容</strong>：<strong>单个 Cookie 保存的数据不能超过 4K</strong>，存储的是字符串，很多浏览器都限制一个站点最多保存 20 个 Cookie。<strong>Session对象没有对存储的数据量的限制，其中可以保存更为复杂的数据类型</strong>。</li>
<li><strong>浏览器支持</strong>：<strong>浏览器可以禁用 Cookie</strong>，此时 Cookie 就不能使用了，但 Session 仍然可以通过重写 URL 继续使用。</li>
<li><strong>跨域名</strong>：<strong>Cookie 可以设置 domain 属性实现跨域名</strong>，而Session 不可以。</li>
</ol>
<hr>
<h3 id="5-应用场景"><a href="#5-应用场景" class="headerlink" title="5. 应用场景"></a>5. 应用场景</h3><ul>
<li><strong>登录网站</strong>，今输入用户名密码登录了，第二天再打开很多情况下就直接打开了。这个时候用到的一个机制就是 Cookie。</li>
<li>Session 一个应用场景是<strong>购物车</strong>，添加了商品之后，服务器端储存这些添加的商品就用到了 Session。下一次同一个用户登录时，就可以从 Session 读取到之前添加的商品。<strong>Cookie只是一个身份信息</strong>，且容量有限，无法储存购物车这种较多的数据。</li>
</ul>
<hr>
<h2 id="5-其他"><a href="#5-其他" class="headerlink" title="5. 其他"></a>5. 其他</h2><p>servlet 等</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">巨瑞康</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://x1a0kang.github.io/2020/08/25/wang-luo/">https://x1a0kang.github.io/2020/08/25/wang-luo/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">巨瑞康</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/Java/">
                                    <span class="chip bg-color">Java</span>
                                </a>
                            
                                <a href="/tags/%E9%9D%A2%E8%AF%95/">
                                    <span class="chip bg-color">面试</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2020/08/25/rong-qi/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/7.jpg" class="responsive-img" alt="容器">
                        
                        <span class="card-title">容器</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            容器1. 容器总结1. 继承关系
Collection 接口

List 接口

ArrayList：Object数组。线程不安全。
Vector：Object数组。线程安全。
LinkedList：双向链表（JDK 1.6 前为循环链表，
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2020-08-25
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Java%E5%AD%A6%E4%B9%A0/" class="post-category">
                                    Java学习
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Java/">
                        <span class="chip bg-color">Java</span>
                    </a>
                    
                    <a href="/tags/%E9%9D%A2%E8%AF%95/">
                        <span class="chip bg-color">面试</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2020/08/05/arraylist-yuan-ma-jie-xi/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/5.jpg" class="responsive-img" alt="ArrayList源码解析">
                        
                        <span class="card-title">ArrayList源码解析</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            ArrayList 源码解析1. ArrayList 源码1. ArrayList 简介ArrayList 继承了 AbstractList ，实现了 List、RandomAccess、Cloneable 和 java.io.serial
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2020-08-05
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Java%E5%AD%A6%E4%B9%A0/" class="post-category">
                                    Java学习
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Java/">
                        <span class="chip bg-color">Java</span>
                    </a>
                    
                    <a href="/tags/%E9%9D%A2%E8%AF%95/">
                        <span class="chip bg-color">面试</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


<!-- 代码块折行 -->

<style type="text/css">
code[class*="language-"], pre[class*="language-"] { white-space: pre !important; }
</style>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        display: none;
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        display: none;
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="503838841"
                   fixed='true'
                   autoplay='false'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="/libs/aplayer/APlayer.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>

    
    <div class="container row center-align" style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            <span id="year">2019</span>
            <a href="/about" target="_blank">巨瑞康</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span
                class="white-color">94.3k</span>&nbsp;字
            
            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;次
            </span>
            
            
            <span id="busuanzi_container_site_uv">
                |&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;人
            </span>
            
            <br>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/x1a0kang" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:18810298505@163.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=976372548" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 976372548" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="/js/search.js"></script>
<script type="text/javascript">
$(function () {
    searchFunc("/search.xml", 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    
    <script type="text/javascript" color="0,0,255"
        pointColor="0,0,255" opacity='0.7'
        zIndex="-1" count="99"
        src="/libs/background/canvas-nest.js"></script>
    

    
    
    <script type="text/javascript" size="150" alpha='0.6'
        zIndex="-1" src="/libs/background/ribbon-refresh.min.js" async="async"></script>
    

    
    <script type="text/javascript" src="/libs/background/ribbon-dynamic.js" async="async"></script>
    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
